window.MzBrowser={};(function(){if(MzBrowser.platform){return}var ua=window.navigator.userAgent;MzBrowser.platform=window.navigator.platform;MzBrowser.firefox=ua.indexOf("Firefox")>0;MzBrowser.opera=typeof(window.opera)=="object";MzBrowser.ie=!MzBrowser.opera&&ua.indexOf("MSIE")>0;MzBrowser.mozilla=window.navigator.product=="Gecko";MzBrowser.netscape=window.navigator.vendor=="Netscape";MzBrowser.safari=ua.indexOf("Safari")>-1;if(MzBrowser.firefox){var re=/Firefox(\s|\/)(\d+(\.\d+)?)/}else{if(MzBrowser.ie){var re=/MSIE( )(\d+(\.\d+)?)/}else{if(MzBrowser.opera){var re=/Opera(\s|\/)(\d+(\.\d+)?)/}else{if(MzBrowser.netscape){var re=/Netscape(\s|\/)(\d+(\.\d+)?)/}else{if(MzBrowser.safari){var re=/Version(\/)(\d+(\.\d+)?)/}else{if(MzBrowser.mozilla){var re=/rv(\:)(\d+(\.\d+)?)/}}}}}}if("undefined"!=typeof(re)&&re.test(ua)){MzBrowser.version=parseFloat(RegExp.$2)}})();var isWorkFlow=false;function buildTab(categories,container,height,rightContent){var tabObj=new YHJsTab({catArray:categories,container:container,divHeight:height,rightDivContent:rightContent});tabObj.show();return tabObj}var YHJsTab=Class.create();YHJsTab.prototype={initialize:function(cfgs){this.config(cfgs);document.body.onresize=this.resetSize.bind(this)},config:function(cfgs){this.catArray=cfgs.catArray;this.divHeight=cfgs.divHeight;this.container=$(cfgs.container)?$(cfgs.container):document.body;this.useMulContenDiv=cfgs.useMulContenDiv===false?false:true;this.rightDivContent=cfgs.rightDivContent?cfgs.rightDivContent:"";this.isShow=false;this.contentArear=null;this.currContentDiv=null},resetSize:function(){if(!this.contentArear){return}var ajustWidth=0;var ajustHeight=40;if(!Prototype.Browser.IE){ajustWidth=8;ajustHeight=43}else{if(Prototype.Browser.IE&&MzBrowser.version==6){ajustWidth=10;ajustHeight=40}}this.container.style.overflow="hidden";this.container.style.width=(document.viewport.getDimensions().width-ajustWidth-10)+"px";var topPos=this.container.style.top?parseInt(this.container.style.top.replace("px","")):0;this.container.style.height=(document.viewport.getDimensions().height-topPos-30)+"px";if(isWorkFlow){if(this.contentArear.tagName.toLowerCase()!="body"){this.contentArear.style.position="relative";this.contentArear.style.left="0px";this.contentArear.style.top="0px";this.contentArear.style.width="0px";this.contentArear.style.height="0px"}}else{if(this.contentArear.tagName.toLowerCase()!="body"){this.contentArear.style.position="absolute";this.contentArear.style.left="0px";this.contentArear.style.top="37px";this.contentArear.style.border="none";this.contentArear.style.width=(document.viewport.getDimensions().width-ajustWidth)+"px";this.contentArear.style.height=(document.viewport.getDimensions().height-ajustHeight)+"px"}}var iFrame=$("contentFrame");if(iFrame&&iFrame.style.display=="block"){iFrame.style.position="absolute";iFrame.style.left="0px";iFrame.style.top="0px";iFrame.style.width=(document.viewport.getDimensions().width-ajustWidth)+"px";iFrame.style.height=(document.viewport.getDimensions().height-ajustHeight)+"px";iFrame.style.border="none"}},show:function(){if(this.isShow){return}var categories=this.catArray;var titleDiv=document.createElement("div");titleDiv.setAttribute("id","title");titleDiv.className="navPanel";this.container.appendChild(titleDiv);var firstTitle=categories[0].title;this.showPage=0;for(var i=0;i<categories.length;i++){var titleLink=document.createElement("a");titleLink.setAttribute("href","javascript:void(0);");var title=categories[i].title;titleDiv.appendChild(titleLink);titleLink.title=title;titleLink.id=i;titleLink.onclick=this.doClickTab.bind(this,title,i);var span=document.createElement("span");span.width=80;var imgUrl=categories[i].imgUrl;imgUrl=null;if(imgUrl){var img=document.createElement("img");img.width=16;img.height=16;img.setAttribute("src",imgUrl);span.appendChild(img)}span.innerHTML+="&nbsp;"+categories[i].title;if(categories[i].title.length>7){span.style.width=categories[i].title.length*15+"px"}if(categories[i].title.length>11){span.style.width=categories[i].title.length*12+"px"}titleLink.appendChild(span);if(categories[i].isShow){firstTitle=categories[i].title;this.showPage=i}span.appendChild(document.createTextNode("  "))}var rightDiv=document.createElement("div");rightDiv.className="rightDiv";rightDiv.style.paddingTop="4px";titleDiv.appendChild(rightDiv);$(rightDiv).update(this.rightDivContent);var contentArear=document.createElement("div");this.contentArear=$(contentArear);contentArear.setAttribute("id","content");this.resetSize();this.container.appendChild(contentArear);this.doClickTab(firstTitle,this.showPage,this.container)},setDisable:function(disableFlag,id){this.catArray[id].disabled=disableFlag},getContentDivId:function(tabId){if(!this.useMulContenDiv){return"contentDiv"}return"contentDiv_"+tabId},displayTabText:function(tabId,contentText){var divId=this.getContentDivId(tabId);if(this.currContentDiv){if(this.currContentDiv.id==divId){return}else{this.currContentDiv.style.display="none"}}var contentFrame=document.getElementById("contentFrame");if(contentFrame){contentFrame.style.display="none"}var contentDiv=document.getElementById(divId);if(!contentDiv){contentDiv=document.createElement("div");contentDiv.id=divId;contentDiv.className="tabContent";this.contentArear.appendChild(contentDiv);contentDiv.style.display="block";contentDiv.innerHTML="&nbsp;"+contentText}else{contentDiv.style.display="block";if(!this.useMulContenDiv){contentDiv.innerHTML="";contentDiv.innerHTML="&nbsp;"+contentText}}this.currContentDiv=contentDiv},doClickTab:function(title,id){if(this.catArray[id].disabled){if(this.catArray[id].disabledFun){this.catArray[id].disabledFun()}return}var titleLink=document.getElementById("title");var count=titleLink.childNodes.length;for(var i=0;i<count;i++){if(i==id){titleLink.childNodes[i].className="active"}else{titleLink.childNodes[i].className=""}}if(this.catArray[id].content){this.displayTabText(id,this.catArray[id].content);return}if(!this.catArray[id].useIframe&&!this.catArray[id].useTextContent){if(this.catArray[id].contentUrl){getJsonRs(this.catArray[id].contentUrl,null,this.dispContent.bind(this,id))}if(this.catArray[id].onload){this.catArray[id].onload()}return}if(!this.catArray[id].useIframe&&this.catArray[id].useTextContent){if(this.catArray[id].contentUrl){getTextRs(this.catArray[id].contentUrl,null,this.dispContentText.bind(this,id))}if(this.catArray[id].onload){this.catArray[id].onload()}return}if(this.currContentDiv){this.currContentDiv.style.display="none";this.currContentDiv=null}var iFrame=$("contentFrame");if(!iFrame){iFrame=document.createElement("iframe");iFrame.setAttribute("id","contentFrame");iFrame.setAttribute("brder","0");iFrame.setAttribute("frameBorder","no");this.contentArear.innerHTML="&nbsp;";this.contentArear.appendChild(iFrame)}iFrame.style.display="block";iFrame.setAttribute("src",this.catArray[id].contentUrl);this.resetSize();if(this.catArray[id].onload){this.catArray[id].onload()}},dispContent:function(){var id=arguments[0];var rtJson=arguments[1];this.catArray[id].content=rtJson.content;this.displayTabText(id,rtJson.content)},dispContentText:function(){var id=arguments[0];var rtText=arguments[1];this.catArray[id].content=rtText;this.displayTabText(id,rtText)}};